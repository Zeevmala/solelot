<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="מפת נקודות מיחזור סוללות בישראל - מצא את הנקודה הקרובה אליך">
    <meta name="theme-color" content="#00796B">
    <title>מפת מיחזור סוללות</title>

    <!-- Open Graph / Social Sharing -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://zeevmala.github.io/solelot/">
    <meta property="og:title" content="מפת מיחזור סוללות">
    <meta property="og:description" content="מצא נקודות מיחזור סוללות בקרבתך - כ-3,900 נקודות איסוף ומתקני מיחזור ברחבי ישראל">
    <meta property="og:image" content="https://zeevmala.github.io/solelot/icons/icon-512.png">
    <meta property="og:locale" content="he_IL">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="מפת מיחזור סוללות">
    <meta name="twitter:description" content="מצא נקודות מיחזור סוללות בקרבתך - כ-3,900 נקודות איסוף ומתקני מיחזור ברחבי ישראל">
    <meta name="twitter:image" content="https://zeevmala.github.io/solelot/icons/icon-512.png">

    <!-- Preconnect to external origins (early connection setup) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://unpkg.com" crossorigin>
    <link rel="preconnect" href="https://a.basemaps.cartocdn.com" crossorigin>
    <link rel="preconnect" href="https://b.basemaps.cartocdn.com" crossorigin>
    <link rel="preconnect" href="https://c.basemaps.cartocdn.com" crossorigin>

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="icon" type="image/png" sizes="96x96" href="icons/icon-96.png">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Marker Cluster CSS (deferred — not needed for initial paint) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" media="print" onload="this.media='all'" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" media="print" onload="this.media='all'" />

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Our CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Skip to main content link for accessibility -->
    <a href="#map" class="skip-link" aria-label="דלג לתוכן המפה">דלג למפה</a>

    <!-- App Header -->
    <header class="app-header" role="banner">
        <div class="header-brand">
            <svg class="header-battery-icon" viewBox="0 0 32 32" width="32" height="32" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <defs>
                    <linearGradient id="headerBattGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" stop-color="#2BB5A6"/>
                        <stop offset="100%" stop-color="#00695C"/>
                    </linearGradient>
                </defs>
                <rect x="11" y="2" width="10" height="4" rx="1.5" fill="#00796B"/>
                <rect x="6" y="6" width="20" height="24" rx="4" fill="url(#headerBattGrad)"/>
                <rect x="8" y="8" width="16" height="20" rx="2.5" fill="white" opacity="0.95"/>
                <rect x="10" y="11" width="12" height="3.5" rx="1" fill="#26A69A"/>
                <rect x="10" y="16.5" width="12" height="3.5" rx="1" fill="#4DB6AC"/>
                <rect x="10" y="22" width="12" height="3.5" rx="1" fill="#80CBC4"/>
                <path d="M17.5 10l-3 6.5h3l-2 6.5 5-7.5h-3.5z" fill="#00796B" opacity="0.18"/>
            </svg>
            <h1 class="header-title">מפת מיחזור סוללות</h1>
        </div>
        <div class="header-search">
            <div class="map-search-container">
                <input type="text" id="search-input" class="map-search-input" placeholder="חיפוש נקודה..." aria-label="חיפוש נקודה" role="combobox" aria-expanded="false" aria-autocomplete="list" aria-owns="search-suggestions" autocomplete="off">
                <button id="search-clear" class="search-clear-btn" aria-label="נקה חיפוש" type="button">&#10005;</button>
                <div id="search-suggestions" class="search-suggestions" role="listbox"></div>
            </div>
        </div>
    </header>

    <!-- Loading Skeleton Overlay -->
    <div id="loading-overlay" class="loading-overlay" role="status" aria-live="polite">
        <div class="skeleton-container" aria-hidden="true">
            <div class="skeleton-header"></div>
            <div class="skeleton-map">
                <div class="skeleton-pin" style="top: 25%; right: 40%"></div>
                <div class="skeleton-pin" style="top: 45%; right: 35%"></div>
                <div class="skeleton-pin" style="top: 55%; right: 42%"></div>
                <div class="skeleton-pin" style="top: 70%; right: 38%"></div>
                <div class="skeleton-cluster" style="top: 35%; right: 38%"></div>
            </div>
            <p id="loading-text" class="skeleton-text">טוען נקודות מיחזור...</p>
        </div>
    </div>

    <!-- Empty State Message -->
    <div id="empty-state" class="empty-state" style="display: none;" role="alert">
        <div class="empty-state-content">
            <span class="empty-icon" aria-hidden="true">🔍</span>
            <h3>לא נמצאו תוצאות</h3>
            <p>נסה לשנות את הסינון או לחפש מונח אחר</p>
            <button id="clear-filters" class="clear-filters-btn" aria-label="נקה את כל הסינונים">נקה סינון</button>
        </div>
    </div>

    <!-- Main Content Container -->
    <main class="main-content">
        <!-- The map -->
        <div id="map" role="application" aria-label="מפת נקודות מיחזור סוללות בישראל" aria-roledescription="מפה אינטראקטיבית" tabindex="0"></div>

        <!-- Location Sidebar -->
        <aside id="sidebar" class="sidebar" aria-label="פרטי נקודה נבחרת" style="display: none;">
            <button id="sidebar-close" class="sidebar-close" aria-label="סגור פרטי נקודה">✕</button>
            <div class="sidebar-drag-zone" aria-hidden="true"></div>
            <div id="sidebar-content" class="sidebar-content"></div>
        </aside>
    </main>

    <!-- Notification Toast -->
    <div id="notification" class="notification" role="alert" aria-live="assertive" style="display: none;"></div>

    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Marker Cluster Plugin -->
    <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>

    <!-- Our JavaScript -->
    <script src="app.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed:', err));
            });
        }
    </script>
</body>
</html>
